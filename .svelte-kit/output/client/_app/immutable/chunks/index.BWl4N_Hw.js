import{_ as f}from"./index.CV5-XYyW.js";import{w as P,d as E}from"./index.Cmv0BlU7.js";import{j as p}from"./scheduler.6wlBD6-3.js";var de=Object.defineProperty,fe=Object.defineProperties,pe=Object.getOwnPropertyDescriptors,D=Object.getOwnPropertySymbols,Y=Object.prototype.hasOwnProperty,Z=Object.prototype.propertyIsEnumerable,z=(e,r,t)=>r in e?de(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t,c=(e,r)=>{for(var t in r||(r={}))Y.call(r,t)&&z(e,t,r[t]);if(D)for(var t of D(r))Z.call(r,t)&&z(e,t,r[t]);return e},y=(e,r)=>fe(e,pe(r)),T=(e,r)=>{var t={};for(var a in e)Y.call(e,a)&&r.indexOf(a)<0&&(t[a]=e[a]);if(e!=null&&D)for(var a of D(e))r.indexOf(a)<0&&Z.call(e,a)&&(t[a]=e[a]);return t},S=["error","warn","debug"],ee=({logger:e=console,level:r=S[1],prefix:t="[i18n]: "})=>S.reduce((a,l,o)=>y(c({},a),{[l]:i=>S.indexOf(r)>=o&&e[l](`${t}${i}`)}),{}),d=ee({}),_e=e=>{d=e},q=e=>{var r=e,{parser:t,key:a,params:l,translations:o,locale:i,fallbackLocale:s}=r,u=T(r,["parser","key","params","translations","locale","fallbackLocale"]);if(!a)return d.warn(`No translation key provided ('${i}' locale). Skipping translation...`),"";if(!i)return d.warn(`No locale provided for '${a}' key. Skipping translation...`),"";let n=(o[i]||{})[a];if(s&&n===void 0&&(d.debug(`No translation provided for '${a}' key in locale '${i}'. Trying fallback '${s}'`),n=(o[s]||{})[a]),n===void 0){if(d.debug(`No translation provided for '${a}' key in fallback '${s}'.`),u.hasOwnProperty("fallbackValue"))return u.fallbackValue;d.warn(`No translation nor fallback found for '${a}' .`)}return t.parse(n,l,i,a)},g=(...e)=>e.length?e.filter(r=>!!r).map(r=>{let t=`${r}`.toLowerCase();try{let[a]=Intl.Collator.supportedLocalesOf(r);if(!a)throw new Error;t=a}catch{d.warn(`'${r}' locale is non-standard.`)}return t}):[],j=(e,r,t)=>{if(r&&Array.isArray(e))return e.map(a=>j(a,r));if(e&&typeof e=="object"){let a=Object.keys(e).reduce((l,o)=>{let i=e[o],s=t?`${t}.${o}`:`${o}`;return i&&typeof i=="object"&&!(r&&Array.isArray(i))?c(c({},l),j(i,r,s)):y(c({},l),{[s]:j(i,r)})},{});return Object.keys(a).length?a:null}return e},me=e=>e.reduce((r,{key:t,data:a,locale:l})=>{if(!a)return r;let[o]=g(l),i=y(c({},r[o]||{}),{[t]:a});return y(c({},r),{[o]:i})},{}),he=async e=>{try{let r=await Promise.all(e.map(t=>{var a=t,{loader:l}=a,o=T(a,["loader"]);return new Promise(async i=>{let s;try{s=await l()}catch(u){d.error(`Failed to load translation. Verify your '${o.locale}' > '${o.key}' Loader.`),d.error(u)}i(y(c({loader:l},o),{data:s}))})}));return me(r)}catch(r){d.error(r)}return{}},ye=e=>r=>{try{if(typeof r=="string")return r===e;if(typeof r=="object")return r.test(e)}catch{d.error("Invalid route config!")}return!1},B=(e,r)=>{let t=!0;try{t=Object.keys(e).filter(a=>e[a]!==void 0).every(a=>e[a]===r[a])}catch{}return t},G=1e3*60*60*24,ve=class{constructor(r){this.cachedAt=0,this.loadedKeys={},this.currentRoute=P(),this.config=P(),this.isLoading=P(!1),this.promises=new Set,this.loading={subscribe:this.isLoading.subscribe,toPromise:(t,a)=>{let{fallbackLocale:l}=p(this.config),o=Array.from(this.promises).filter(i=>{let s=B({locale:g(t)[0],route:a},i);return l&&(s=s||B({locale:g(l)[0],route:a},i)),s}).map(({promise:i})=>i);return Promise.all(o)},get:()=>p(this.isLoading)},this.privateRawTranslations=P({}),this.rawTranslations={subscribe:this.privateRawTranslations.subscribe,get:()=>p(this.rawTranslations)},this.privateTranslations=P({}),this.translations={subscribe:this.privateTranslations.subscribe,get:()=>p(this.translations)},this.locales=y(c({},E([this.config,this.privateTranslations],([t,a])=>{if(!t)return[];let{loaders:l=[]}=t,o=l.map(({locale:s})=>s),i=Object.keys(a).map(s=>s);return Array.from(new Set([...g(...o),...g(...i)]))},[])),{get:()=>p(this.locales)}),this.internalLocale=P(),this.loaderTrigger=E([this.internalLocale,this.currentRoute],([t,a],l)=>{var o,i;t!==void 0&&a!==void 0&&!(t===((o=p(this.loaderTrigger))==null?void 0:o[0])&&a===((i=p(this.loaderTrigger))==null?void 0:i[1]))&&(d.debug("Triggering translation load..."),l([t,a]))},[]),this.localeHelper=P(),this.locale={subscribe:this.localeHelper.subscribe,forceSet:this.localeHelper.set,set:this.internalLocale.set,update:this.internalLocale.update,get:()=>p(this.locale)},this.initialized=E([this.locale,this.currentRoute,this.privateTranslations],([t,a,l],o)=>{p(this.initialized)||o(t!==void 0&&a!==void 0&&!!Object.keys(l).length)}),this.translation=E([this.privateTranslations,this.locale,this.isLoading],([t,a,l],o)=>{let i=t[a];i&&Object.keys(i).length&&!l&&o(i)},{}),this.t=y(c({},E([this.config,this.translation],t=>{var[a]=t,l=a,{parser:o,fallbackLocale:i}=l,s=T(l,["parser","fallbackLocale"]);return(u,...n)=>q(c({parser:o,key:u,params:n,translations:this.translations.get(),locale:this.locale.get(),fallbackLocale:i},s.hasOwnProperty("fallbackValue")?{fallbackValue:s.fallbackValue}:{}))})),{get:(t,...a)=>p(this.t)(t,...a)}),this.l=y(c({},E([this.config,this.translations],t=>{var[a,...l]=t,o=a,{parser:i,fallbackLocale:s}=o,u=T(o,["parser","fallbackLocale"]),[n]=l;return(_,m,...b)=>q(c({parser:i,key:m,params:b,translations:n,locale:_,fallbackLocale:s},u.hasOwnProperty("fallbackValue")?{fallbackValue:u.fallbackValue}:{}))})),{get:(t,a,...l)=>p(this.l)(t,a,...l)}),this.getLocale=t=>{let{fallbackLocale:a}=p(this.config)||{},l=t||a;if(!l)return;let o=this.locales.get();return o.find(i=>g(l).includes(i))||o.find(i=>g(a).includes(i))},this.setLocale=t=>{if(t&&t!==p(this.internalLocale))return d.debug(`Setting '${t}' locale.`),this.internalLocale.set(t),this.loading.toPromise(t,p(this.currentRoute))},this.setRoute=t=>{if(t!==p(this.currentRoute)){d.debug(`Setting '${t}' route.`),this.currentRoute.set(t);let a=p(this.internalLocale);return this.loading.toPromise(a,t)}},this.loadConfig=async t=>{await this.configLoader(t)},this.getTranslationProps=async(t=this.locale.get(),a=p(this.currentRoute))=>{let l=p(this.config);if(!l||!t)return[];let o=this.translations.get(),{loaders:i,fallbackLocale:s="",cache:u=G}=l||{},n=Number.isNaN(+u)?G:+u;this.cachedAt?Date.now()>n+this.cachedAt&&(d.debug("Refreshing cache."),this.loadedKeys={},this.cachedAt=0):(d.debug("Setting cache timestamp."),this.cachedAt=Date.now());let[_,m]=g(t,s),b=o[_],V=o[m],L=(i||[]).map(h=>{var w=h,{locale:R}=w,v=T(w,["locale"]);return y(c({},v),{locale:g(R)[0]})}).filter(({routes:h})=>!h||(h||[]).some(ye(a))).filter(({key:h,locale:w})=>w===_&&(!b||!(this.loadedKeys[_]||[]).includes(h))||s&&w===m&&(!V||!(this.loadedKeys[m]||[]).includes(h)));if(L.length){this.isLoading.set(!0),d.debug("Fetching translations...");let h=await he(L);this.isLoading.set(!1);let w=Object.keys(h).reduce((v,O)=>y(c({},v),{[O]:Object.keys(h[O])}),{}),R=L.filter(({key:v,locale:O})=>(w[O]||[]).some(A=>`${A}`.startsWith(v))).reduce((v,{key:O,locale:A})=>y(c({},v),{[A]:[...v[A]||[],O]}),{});return[h,R]}return[]},this.addTranslations=(t,a)=>{if(!t)return;let l=p(this.config),{preprocess:o}=l||{};d.debug("Adding translations...");let i=Object.keys(t||{});this.privateRawTranslations.update(s=>i.reduce((u,n)=>y(c({},u),{[n]:c(c({},u[n]||{}),t[n])}),s)),this.privateTranslations.update(s=>i.reduce((u,n)=>{let _=!0,m=t[n];return typeof o=="function"&&(m=o(m)),(typeof o=="function"||o==="none")&&(_=!1),y(c({},u),{[n]:c(c({},u[n]||{}),_?j(m,o==="preserveArrays"):m)})},s)),i.forEach(s=>{let u=Object.keys(t[s]).map(n=>`${n}`.split(".")[0]);a&&(u=a[s]),this.loadedKeys[s]=Array.from(new Set([...this.loadedKeys[s]||[],...u||[]]))})},this.loader=async([t,a])=>{let l=this.getLocale(t)||void 0;d.debug(`Adding loader promise for '${l}' locale and '${a}' route.`);let o=(async()=>{let i=await this.getTranslationProps(l,a);i.length&&this.addTranslations(...i)})();this.promises.add({locale:l,route:a,promise:o}),o.then(()=>{l&&this.locale.get()!==l&&this.locale.forceSet(l)})},this.loadTranslations=(t,a=p(this.currentRoute)||"")=>{let l=this.getLocale(t);if(l)return this.setRoute(a),this.setLocale(l),this.loading.toPromise(l,a)},this.loaderTrigger.subscribe(this.loader),this.isLoading.subscribe(async t=>{t&&this.promises.size&&(await this.loading.toPromise(),this.promises.clear(),d.debug("Loader promises have been purged."))}),r&&this.loadConfig(r)}async configLoader(r){if(!r)return d.error("No config provided!");let t=r,{initLocale:a,fallbackLocale:l,translations:o,log:i}=t,s=T(t,["initLocale","fallbackLocale","translations","log"]);i&&_e(ee(i)),[a]=g(a),[l]=g(l),d.debug("Setting config."),this.config.set(c({initLocale:a,fallbackLocale:l,translations:o},s)),o&&this.addTranslations(o),a&&await this.loadTranslations(a)}},te=Object.defineProperty,ge=Object.defineProperties,be=Object.getOwnPropertyDescriptors,I=Object.getOwnPropertySymbols,ae=Object.prototype.hasOwnProperty,re=Object.prototype.propertyIsEnumerable,W=(e,r,t)=>r in e?te(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t,k=(e,r)=>{for(var t in r||(r={}))ae.call(r,t)&&W(e,t,r[t]);if(I)for(var t of I(r))re.call(r,t)&&W(e,t,r[t]);return e},M=(e,r)=>ge(e,be(r)),$=(e,r)=>{var t={};for(var a in e)ae.call(e,a)&&r.indexOf(a)<0&&(t[a]=e[a]);if(e!=null&&I)for(var a of I(e))r.indexOf(a)<0&&re.call(e,a)&&(t[a]=e[a]);return t},we=(e,r)=>{for(var t in r)te(e,t,{get:r[t],enumerable:!0})},le={};we(le,{ago:()=>Ve,currency:()=>Re,date:()=>Pe,eq:()=>H,gt:()=>ie,gte:()=>Le,lt:()=>oe,lte:()=>Oe,ne:()=>ke,number:()=>$e});var N=(e,r)=>{let{modifierDefaults:t}=r||{},{[e]:a}=t||{};return a||{}},H=({value:e,options:r=[],defaultValue:t=""})=>(r.find(({key:a})=>`${a}`.toLowerCase()===`${e}`.toLowerCase())||{}).value||t,ke=({value:e,options:r=[],defaultValue:t=""})=>(r.find(({key:a})=>`${a}`.toLowerCase()!==`${e}`.toLowerCase())||{}).value||t,oe=({value:e,options:r=[],defaultValue:t=""})=>(r.sort((a,l)=>+a.key-+l.key).find(({key:a})=>+e<+a)||{}).value||t,ie=({value:e,options:r=[],defaultValue:t=""})=>(r.sort((a,l)=>+l.key-+a.key).find(({key:a})=>+e>+a)||{}).value||t,Oe=({value:e,options:r=[],defaultValue:t=""})=>H({value:e,options:r,defaultValue:oe({value:e,options:r,defaultValue:t})}),Le=({value:e,options:r=[],defaultValue:t=""})=>H({value:e,options:r,defaultValue:ie({value:e,options:r,defaultValue:t})}),$e=({value:e,props:r,defaultValue:t="",locale:a="",parserOptions:l})=>{if(!a)return"";let o=N("number",l),{maximumFractionDigits:i}=o,s=$(o,["maximumFractionDigits"]),u=(r==null?void 0:r.number)||{},{maximumFractionDigits:n=i||2}=u,_=$(u,["maximumFractionDigits"]);return new Intl.NumberFormat(a,k(M(k({},s),{maximumFractionDigits:n}),_)).format(+e||+t)},Pe=({value:e,props:r,defaultValue:t="",locale:a="",parserOptions:l})=>{if(!a)return"";let o=$(N("date",l),[]),i=$((r==null?void 0:r.date)||{},[]);return new Intl.DateTimeFormat(a,k(k({},o),i)).format(+e||+t)},C=[{key:"second",multiplier:1e3},{key:"minute",multiplier:60},{key:"hour",multiplier:60},{key:"day",multiplier:24},{key:"week",multiplier:7},{key:"month",multiplier:13/3},{key:"year",multiplier:12}],se=(e="",r="")=>new RegExp(`^${e}s?$`).test(r),Ee=e=>C.indexOf(C.find(({key:r})=>se(r,e))),Te=(e,r)=>C.reduce(([t,a],{key:l,multiplier:o},i)=>{if(se(a,r))return[t,a];if(!a||i===Ee(a)+1){let s=Math.round(t/o);if(!a||Math.abs(s)>=1||r!=="auto")return[s,l]}return[t,a]},[e,""]),Ve=({value:e,defaultValue:r="",locale:t="",props:a,parserOptions:l})=>{if(!t)return"";let o=N("ago",l),{format:i,numeric:s}=o,u=$(o,["format","numeric"]),n=(a==null?void 0:a.ago)||{},{format:_=i||"auto",numeric:m=s||"auto"}=n,b=$(n,["format","numeric"]),V=+e||+r,L=Te(V,_);return new Intl.RelativeTimeFormat(t,k(M(k({},u),{numeric:m}),b)).format(...L)},Re=({value:e,defaultValue:r="",locale:t="",props:a,parserOptions:l})=>{if(!t)return"";let o=N("currency",l),{ratio:i,currency:s}=o,u=$(o,["ratio","currency"]),n=(a==null?void 0:a.currency)||{},{ratio:_=i||1,currency:m=s}=n,b=$(n,["ratio","currency"]);return new Intl.NumberFormat(t,k(M(k({},u),{style:"currency",currency:m}),b)).format(_*(e||r))},Ae=e=>typeof e=="string"&&/{{(?:(?!{{|}}).)+}}/.test(e),K=e=>typeof e=="string"?e.replace(/\\(?=:|;|{|})/g,""):e,je=({value:e,props:r,payload:t,parserOptions:a,locale:l})=>`${e}`.replace(/{{\s*(?:(?!{{|}}).)+\s*}}/g,o=>{let i=K(`${o.match(/(?!{|\s).+?(?!\\[:;]).(?=\s*(?:[:;]|}}$))/)}`),s=t==null?void 0:t[i],[,u=""]=o.match(/.+?(?!\\;).;\s*default\s*:\s*([^\s:;].+?(?:\\[:;]|[^;}])*)(?=\s*(?:;|}}$))/i)||[];u=u||(t==null?void 0:t.default)||"";let[,n=""]=o.match(/{{\s*(?:[^;]|(?:\\;))+\s*(?:(?!\\:).[:])\s*(?!\s)((?:\\;|[^;])+?)(?=\s*(?:[;]|}}$))/i)||[];if(s===void 0&&n!=="ne")return u;let _=!!n,{customModifiers:m}=a||{},b=k(k({},le),m||{});n=Object.keys(b).includes(n)?n:"eq";let V=b[n],L=(o.match(/[^\s:;{](?:[^;]|\\[;])+[^:;}]/gi)||[]).reduce((h,w,R)=>{if(R>0){let v=K(`${w.match(/(?:(?:\\:)|[^:])+/)}`.trim()),O=`${w.match(/(?:(?:\\:)|[^:])+$/)}`.trimStart();if(v&&v!=="default"&&O)return[...h,{key:v,value:O}]}return h},[]);return!_&&!L.length?s:V({value:s,options:L,props:r,defaultValue:u,locale:l,parserOptions:a})}),ne=({value:e,props:r,payload:t,parserOptions:a,locale:l})=>{if(Ae(e)){let o=je({value:e,payload:t,props:r,parserOptions:a,locale:l});return ne({value:o,payload:t,props:r,parserOptions:a,locale:l})}else return K(e)},De=e=>({parse:(r,[t,a],l,o)=>(t!=null&&t.default&&r===void 0&&(r=t.default),r===void 0&&(r=o),ne({value:r,payload:t,props:a,parserOptions:e,locale:l}))}),Ie=De,xe=Object.defineProperty,Ne=Object.defineProperties,Se=Object.getOwnPropertyDescriptors,x=Object.getOwnPropertySymbols,ue=Object.prototype.hasOwnProperty,ce=Object.prototype.propertyIsEnumerable,U=(e,r,t)=>r in e?xe(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t,Fe=(e,r)=>{for(var t in r||(r={}))ue.call(r,t)&&U(e,t,r[t]);if(x)for(var t of x(r))ce.call(r,t)&&U(e,t,r[t]);return e},Ce=(e,r)=>Ne(e,Se(r)),Ke=(e,r)=>{var t={};for(var a in e)ue.call(e,a)&&r.indexOf(a)<0&&(t[a]=e[a]);if(e!=null&&x)for(var a of x(e))r.indexOf(a)<0&&ce.call(e,a)&&(t[a]=e[a]);return t},J=e=>{var r=e,{parserOptions:t={}}=r,a=Ke(r,["parserOptions"]);return Ce(Fe({},a),{parser:Ie(t)})},Me=class extends ve{constructor(r){super(r&&J(r)),this.loadConfig=t=>super.configLoader(J(t))}},He=Me;const ze="ENG",qe="HIN",Be="BEN",F={en:ze,hi:qe,bn:Be},Ge={translations:{en:{lang:F},hi:{lang:F},bn:{lang:F}},loaders:[{locale:"en",key:"menu",loader:async()=>(await f(async()=>{const{default:e}=await import("./menu.B7aNYBrb.js");return{default:e}},[],import.meta.url)).default},{locale:"en",key:"error",loader:async()=>(await f(async()=>{const{default:e}=await import("./error.C9a_BKw0.js");return{default:e}},[],import.meta.url)).default},{locale:"en",key:"home",routes:["","/"],loader:async()=>(await f(async()=>{const{default:e}=await import("./home.B9s2btSr.js");return{default:e}},[],import.meta.url)).default},{locale:"en",key:"chapter2",routes:["/chapter2"],loader:async()=>(await f(async()=>{const{default:e}=await import("./chapter2.b9O2YSC1.js");return{default:e}},[],import.meta.url)).default},{locale:"en",key:"chapter3",routes:["/chapter3"],loader:async()=>(await f(async()=>{const{default:e}=await import("./chapter3.CVzfo16G.js");return{default:e}},[],import.meta.url)).default},{locale:"en",key:"method",routes:["/method"],loader:async()=>(await f(async()=>{const{default:e}=await import("./method.DaHNBJ24.js");return{default:e}},[],import.meta.url)).default},{locale:"hi",key:"menu",loader:async()=>(await f(async()=>{const{default:e}=await import("./menu.D-iUHJP2.js");return{default:e}},[],import.meta.url)).default},{locale:"hi",key:"error",loader:async()=>(await f(async()=>{const{default:e}=await import("./error.CunplLN8.js");return{default:e}},[],import.meta.url)).default},{locale:"hi",key:"home",routes:["","/"],loader:async()=>(await f(async()=>{const{default:e}=await import("./home.bS9h06xo.js");return{default:e}},[],import.meta.url)).default},{locale:"hi",key:"method",routes:["/method"],loader:async()=>(await f(async()=>{const{default:e}=await import("./method.WB6kqv2x.js");return{default:e}},[],import.meta.url)).default},{locale:"hi",key:"chapter2",routes:["/chapter2"],loader:async()=>(await f(async()=>{const{default:e}=await import("./chapter2.CnpsiENk.js");return{default:e}},[],import.meta.url)).default},{locale:"hi",key:"chapter3",routes:["/chapter3"],loader:async()=>(await f(async()=>{const{default:e}=await import("./chapter3.B3Yudlk4.js");return{default:e}},[],import.meta.url)).default},{locale:"hi",key:"method",routes:["/method"],loader:async()=>(await f(async()=>{const{default:e}=await import("./method.WB6kqv2x.js");return{default:e}},[],import.meta.url)).default},{locale:"bn",key:"menu",loader:async()=>(await f(async()=>{const{default:e}=await import("./menu.wecPc_ST.js");return{default:e}},[],import.meta.url)).default},{locale:"bn",key:"error",loader:async()=>(await f(async()=>{const{default:e}=await import("./error.XXCH5r0s.js");return{default:e}},[],import.meta.url)).default},{locale:"bn",key:"home",routes:["","/"],loader:async()=>(await f(async()=>{const{default:e}=await import("./home.5rUBECx2.js");return{default:e}},[],import.meta.url)).default},{locale:"bn",key:"method",routes:["/method"],loader:async()=>(await f(async()=>{const{default:e}=await import("./method.Ca2q6A8p.js");return{default:e}},[],import.meta.url)).default},{locale:"bn",key:"chapter2",routes:["/chapter2"],loader:async()=>(await f(async()=>{const{default:e}=await import("./chapter2.BJhsbhuF.js");return{default:e}},[],import.meta.url)).default},{locale:"bn",key:"chapter3",routes:["/chapter3"],loader:async()=>(await f(async()=>{const{default:e}=await import("./chapter3.DRGK4ULT.js");return{default:e}},[],import.meta.url)).default},{locale:"bn",key:"method",routes:["/method"],loader:async()=>(await f(async()=>{const{default:e}=await import("./method.Ca2q6A8p.js");return{default:e}},[],import.meta.url)).default}]},{t:Ye,locale:Ze,locales:et,loading:Q,addTranslations:tt,loadTranslations:at,translations:X,setRoute:rt,setLocale:lt}=new He(Ge);Q.subscribe(async e=>{e&&(console.log("Loading translations..."),await Q.toPromise(),console.log("Updated translations",X.get()),console.log("----",X))});export{tt as a,lt as b,et as c,Ze as l,rt as s,Ye as t};
