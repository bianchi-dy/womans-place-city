import{_ as f}from"./index.DcqKpovN.js";import{w as E,d as T,b as g}from"./paths.DXoOdDFV.js";import{j as p}from"./scheduler.CsOBMKjz.js";var fe=Object.defineProperty,pe=Object.defineProperties,he=Object.getOwnPropertyDescriptors,I=Object.getOwnPropertySymbols,Z=Object.prototype.hasOwnProperty,ee=Object.prototype.propertyIsEnumerable,q=(e,r,t)=>r in e?fe(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t,c=(e,r)=>{for(var t in r||(r={}))Z.call(r,t)&&q(e,t,r[t]);if(I)for(var t of I(r))ee.call(r,t)&&q(e,t,r[t]);return e},y=(e,r)=>pe(e,he(r)),j=(e,r)=>{var t={};for(var a in e)Z.call(e,a)&&r.indexOf(a)<0&&(t[a]=e[a]);if(e!=null&&I)for(var a of I(e))r.indexOf(a)<0&&ee.call(e,a)&&(t[a]=e[a]);return t},F=["error","warn","debug"],te=({logger:e=console,level:r=F[1],prefix:t="[i18n]: "})=>F.reduce((a,l,o)=>y(c({},a),{[l]:i=>F.indexOf(r)>=o&&e[l](`${t}${i}`)}),{}),d=te({}),_e=e=>{d=e},B=e=>{var r=e,{parser:t,key:a,params:l,translations:o,locale:i,fallbackLocale:n}=r,u=j(r,["parser","key","params","translations","locale","fallbackLocale"]);if(!a)return d.warn(`No translation key provided ('${i}' locale). Skipping translation...`),"";if(!i)return d.warn(`No locale provided for '${a}' key. Skipping translation...`),"";let s=(o[i]||{})[a];if(n&&s===void 0&&(d.debug(`No translation provided for '${a}' key in locale '${i}'. Trying fallback '${n}'`),s=(o[n]||{})[a]),s===void 0){if(d.debug(`No translation provided for '${a}' key in fallback '${n}'.`),u.hasOwnProperty("fallbackValue"))return u.fallbackValue;d.warn(`No translation nor fallback found for '${a}' .`)}return t.parse(s,l,i,a)},b=(...e)=>e.length?e.filter(r=>!!r).map(r=>{let t=`${r}`.toLowerCase();try{let[a]=Intl.Collator.supportedLocalesOf(r);if(!a)throw new Error;t=a}catch{d.warn(`'${r}' locale is non-standard.`)}return t}):[],D=(e,r,t)=>{if(r&&Array.isArray(e))return e.map(a=>D(a,r));if(e&&typeof e=="object"){let a=Object.keys(e).reduce((l,o)=>{let i=e[o],n=t?`${t}.${o}`:`${o}`;return i&&typeof i=="object"&&!(r&&Array.isArray(i))?c(c({},l),D(i,r,n)):y(c({},l),{[n]:D(i,r)})},{});return Object.keys(a).length?a:null}return e},me=e=>e.reduce((r,{key:t,data:a,locale:l})=>{if(!a)return r;let[o]=b(l),i=y(c({},r[o]||{}),{[t]:a});return y(c({},r),{[o]:i})},{}),ye=async e=>{try{let r=await Promise.all(e.map(t=>{var a=t,{loader:l}=a,o=j(a,["loader"]);return new Promise(async i=>{let n;try{n=await l()}catch(u){d.error(`Failed to load translation. Verify your '${o.locale}' > '${o.key}' Loader.`),d.error(u)}i(y(c({loader:l},o),{data:n}))})}));return me(r)}catch(r){d.error(r)}return{}},ve=e=>r=>{try{if(typeof r=="string")return r===e;if(typeof r=="object")return r.test(e)}catch{d.error("Invalid route config!")}return!1},G=(e,r)=>{let t=!0;try{t=Object.keys(e).filter(a=>e[a]!==void 0).every(a=>e[a]===r[a])}catch{}return t},W=1e3*60*60*24,ge=class{constructor(r){this.cachedAt=0,this.loadedKeys={},this.currentRoute=E(),this.config=E(),this.isLoading=E(!1),this.promises=new Set,this.loading={subscribe:this.isLoading.subscribe,toPromise:(t,a)=>{let{fallbackLocale:l}=p(this.config),o=Array.from(this.promises).filter(i=>{let n=G({locale:b(t)[0],route:a},i);return l&&(n=n||G({locale:b(l)[0],route:a},i)),n}).map(({promise:i})=>i);return Promise.all(o)},get:()=>p(this.isLoading)},this.privateRawTranslations=E({}),this.rawTranslations={subscribe:this.privateRawTranslations.subscribe,get:()=>p(this.rawTranslations)},this.privateTranslations=E({}),this.translations={subscribe:this.privateTranslations.subscribe,get:()=>p(this.translations)},this.locales=y(c({},T([this.config,this.privateTranslations],([t,a])=>{if(!t)return[];let{loaders:l=[]}=t,o=l.map(({locale:n})=>n),i=Object.keys(a).map(n=>n);return Array.from(new Set([...b(...o),...b(...i)]))},[])),{get:()=>p(this.locales)}),this.internalLocale=E(),this.loaderTrigger=T([this.internalLocale,this.currentRoute],([t,a],l)=>{var o,i;t!==void 0&&a!==void 0&&!(t===((o=p(this.loaderTrigger))==null?void 0:o[0])&&a===((i=p(this.loaderTrigger))==null?void 0:i[1]))&&(d.debug("Triggering translation load..."),l([t,a]))},[]),this.localeHelper=E(),this.locale={subscribe:this.localeHelper.subscribe,forceSet:this.localeHelper.set,set:this.internalLocale.set,update:this.internalLocale.update,get:()=>p(this.locale)},this.initialized=T([this.locale,this.currentRoute,this.privateTranslations],([t,a,l],o)=>{p(this.initialized)||o(t!==void 0&&a!==void 0&&!!Object.keys(l).length)}),this.translation=T([this.privateTranslations,this.locale,this.isLoading],([t,a,l],o)=>{let i=t[a];i&&Object.keys(i).length&&!l&&o(i)},{}),this.t=y(c({},T([this.config,this.translation],t=>{var[a]=t,l=a,{parser:o,fallbackLocale:i}=l,n=j(l,["parser","fallbackLocale"]);return(u,...s)=>B(c({parser:o,key:u,params:s,translations:this.translations.get(),locale:this.locale.get(),fallbackLocale:i},n.hasOwnProperty("fallbackValue")?{fallbackValue:n.fallbackValue}:{}))})),{get:(t,...a)=>p(this.t)(t,...a)}),this.l=y(c({},T([this.config,this.translations],t=>{var[a,...l]=t,o=a,{parser:i,fallbackLocale:n}=o,u=j(o,["parser","fallbackLocale"]),[s]=l;return(h,_,...w)=>B(c({parser:i,key:_,params:w,translations:s,locale:h,fallbackLocale:n},u.hasOwnProperty("fallbackValue")?{fallbackValue:u.fallbackValue}:{}))})),{get:(t,a,...l)=>p(this.l)(t,a,...l)}),this.getLocale=t=>{let{fallbackLocale:a}=p(this.config)||{},l=t||a;if(!l)return;let o=this.locales.get();return o.find(i=>b(l).includes(i))||o.find(i=>b(a).includes(i))},this.setLocale=t=>{if(t&&t!==p(this.internalLocale))return d.debug(`Setting '${t}' locale.`),this.internalLocale.set(t),this.loading.toPromise(t,p(this.currentRoute))},this.setRoute=t=>{if(t!==p(this.currentRoute)){d.debug(`Setting '${t}' route.`),this.currentRoute.set(t);let a=p(this.internalLocale);return this.loading.toPromise(a,t)}},this.loadConfig=async t=>{await this.configLoader(t)},this.getTranslationProps=async(t=this.locale.get(),a=p(this.currentRoute))=>{let l=p(this.config);if(!l||!t)return[];let o=this.translations.get(),{loaders:i,fallbackLocale:n="",cache:u=W}=l||{},s=Number.isNaN(+u)?W:+u;this.cachedAt?Date.now()>s+this.cachedAt&&(d.debug("Refreshing cache."),this.loadedKeys={},this.cachedAt=0):(d.debug("Setting cache timestamp."),this.cachedAt=Date.now());let[h,_]=b(t,n),w=o[h],V=o[_],L=(i||[]).map(m=>{var k=m,{locale:R}=k,v=j(k,["locale"]);return y(c({},v),{locale:b(R)[0]})}).filter(({routes:m})=>!m||(m||[]).some(ve(a))).filter(({key:m,locale:k})=>k===h&&(!w||!(this.loadedKeys[h]||[]).includes(m))||n&&k===_&&(!V||!(this.loadedKeys[_]||[]).includes(m)));if(L.length){this.isLoading.set(!0),d.debug("Fetching translations...");let m=await ye(L);this.isLoading.set(!1);let k=Object.keys(m).reduce((v,$)=>y(c({},v),{[$]:Object.keys(m[$])}),{}),R=L.filter(({key:v,locale:$})=>(k[$]||[]).some(A=>`${A}`.startsWith(v))).reduce((v,{key:$,locale:A})=>y(c({},v),{[A]:[...v[A]||[],$]}),{});return[m,R]}return[]},this.addTranslations=(t,a)=>{if(!t)return;let l=p(this.config),{preprocess:o}=l||{};d.debug("Adding translations...");let i=Object.keys(t||{});this.privateRawTranslations.update(n=>i.reduce((u,s)=>y(c({},u),{[s]:c(c({},u[s]||{}),t[s])}),n)),this.privateTranslations.update(n=>i.reduce((u,s)=>{let h=!0,_=t[s];return typeof o=="function"&&(_=o(_)),(typeof o=="function"||o==="none")&&(h=!1),y(c({},u),{[s]:c(c({},u[s]||{}),h?D(_,o==="preserveArrays"):_)})},n)),i.forEach(n=>{let u=Object.keys(t[n]).map(s=>`${s}`.split(".")[0]);a&&(u=a[n]),this.loadedKeys[n]=Array.from(new Set([...this.loadedKeys[n]||[],...u||[]]))})},this.loader=async([t,a])=>{let l=this.getLocale(t)||void 0;d.debug(`Adding loader promise for '${l}' locale and '${a}' route.`);let o=(async()=>{let i=await this.getTranslationProps(l,a);i.length&&this.addTranslations(...i)})();this.promises.add({locale:l,route:a,promise:o}),o.then(()=>{l&&this.locale.get()!==l&&this.locale.forceSet(l)})},this.loadTranslations=(t,a=p(this.currentRoute)||"")=>{let l=this.getLocale(t);if(l)return this.setRoute(a),this.setLocale(l),this.loading.toPromise(l,a)},this.loaderTrigger.subscribe(this.loader),this.isLoading.subscribe(async t=>{t&&this.promises.size&&(await this.loading.toPromise(),this.promises.clear(),d.debug("Loader promises have been purged."))}),r&&this.loadConfig(r)}async configLoader(r){if(!r)return d.error("No config provided!");let t=r,{initLocale:a,fallbackLocale:l,translations:o,log:i}=t,n=j(t,["initLocale","fallbackLocale","translations","log"]);i&&_e(te(i)),[a]=b(a),[l]=b(l),d.debug("Setting config."),this.config.set(c({initLocale:a,fallbackLocale:l,translations:o},n)),o&&this.addTranslations(o),a&&await this.loadTranslations(a)}},ae=Object.defineProperty,be=Object.defineProperties,we=Object.getOwnPropertyDescriptors,x=Object.getOwnPropertySymbols,re=Object.prototype.hasOwnProperty,le=Object.prototype.propertyIsEnumerable,U=(e,r,t)=>r in e?ae(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t,O=(e,r)=>{for(var t in r||(r={}))re.call(r,t)&&U(e,t,r[t]);if(x)for(var t of x(r))le.call(r,t)&&U(e,t,r[t]);return e},H=(e,r)=>be(e,we(r)),P=(e,r)=>{var t={};for(var a in e)re.call(e,a)&&r.indexOf(a)<0&&(t[a]=e[a]);if(e!=null&&x)for(var a of x(e))r.indexOf(a)<0&&le.call(e,a)&&(t[a]=e[a]);return t},ke=(e,r)=>{for(var t in r)ae(e,t,{get:r[t],enumerable:!0})},oe={};ke(oe,{ago:()=>Ve,currency:()=>Re,date:()=>Ee,eq:()=>z,gt:()=>ne,gte:()=>Le,lt:()=>ie,lte:()=>$e,ne:()=>Oe,number:()=>Pe});var S=(e,r)=>{let{modifierDefaults:t}=r||{},{[e]:a}=t||{};return a||{}},z=({value:e,options:r=[],defaultValue:t=""})=>(r.find(({key:a})=>`${a}`.toLowerCase()===`${e}`.toLowerCase())||{}).value||t,Oe=({value:e,options:r=[],defaultValue:t=""})=>(r.find(({key:a})=>`${a}`.toLowerCase()!==`${e}`.toLowerCase())||{}).value||t,ie=({value:e,options:r=[],defaultValue:t=""})=>(r.sort((a,l)=>+a.key-+l.key).find(({key:a})=>+e<+a)||{}).value||t,ne=({value:e,options:r=[],defaultValue:t=""})=>(r.sort((a,l)=>+l.key-+a.key).find(({key:a})=>+e>+a)||{}).value||t,$e=({value:e,options:r=[],defaultValue:t=""})=>z({value:e,options:r,defaultValue:ie({value:e,options:r,defaultValue:t})}),Le=({value:e,options:r=[],defaultValue:t=""})=>z({value:e,options:r,defaultValue:ne({value:e,options:r,defaultValue:t})}),Pe=({value:e,props:r,defaultValue:t="",locale:a="",parserOptions:l})=>{if(!a)return"";let o=S("number",l),{maximumFractionDigits:i}=o,n=P(o,["maximumFractionDigits"]),u=(r==null?void 0:r.number)||{},{maximumFractionDigits:s=i||2}=u,h=P(u,["maximumFractionDigits"]);return new Intl.NumberFormat(a,O(H(O({},n),{maximumFractionDigits:s}),h)).format(+e||+t)},Ee=({value:e,props:r,defaultValue:t="",locale:a="",parserOptions:l})=>{if(!a)return"";let o=P(S("date",l),[]),i=P((r==null?void 0:r.date)||{},[]);return new Intl.DateTimeFormat(a,O(O({},o),i)).format(+e||+t)},K=[{key:"second",multiplier:1e3},{key:"minute",multiplier:60},{key:"hour",multiplier:60},{key:"day",multiplier:24},{key:"week",multiplier:7},{key:"month",multiplier:13/3},{key:"year",multiplier:12}],se=(e="",r="")=>new RegExp(`^${e}s?$`).test(r),Te=e=>K.indexOf(K.find(({key:r})=>se(r,e))),je=(e,r)=>K.reduce(([t,a],{key:l,multiplier:o},i)=>{if(se(a,r))return[t,a];if(!a||i===Te(a)+1){let n=Math.round(t/o);if(!a||Math.abs(n)>=1||r!=="auto")return[n,l]}return[t,a]},[e,""]),Ve=({value:e,defaultValue:r="",locale:t="",props:a,parserOptions:l})=>{if(!t)return"";let o=S("ago",l),{format:i,numeric:n}=o,u=P(o,["format","numeric"]),s=(a==null?void 0:a.ago)||{},{format:h=i||"auto",numeric:_=n||"auto"}=s,w=P(s,["format","numeric"]),V=+e||+r,L=je(V,h);return new Intl.RelativeTimeFormat(t,O(H(O({},u),{numeric:_}),w)).format(...L)},Re=({value:e,defaultValue:r="",locale:t="",props:a,parserOptions:l})=>{if(!t)return"";let o=S("currency",l),{ratio:i,currency:n}=o,u=P(o,["ratio","currency"]),s=(a==null?void 0:a.currency)||{},{ratio:h=i||1,currency:_=n}=s,w=P(s,["ratio","currency"]);return new Intl.NumberFormat(t,O(H(O({},u),{style:"currency",currency:_}),w)).format(h*(e||r))},Ae=e=>typeof e=="string"&&/{{(?:(?!{{|}}).)+}}/.test(e),M=e=>typeof e=="string"?e.replace(/\\(?=:|;|{|})/g,""):e,De=({value:e,props:r,payload:t,parserOptions:a,locale:l})=>`${e}`.replace(/{{\s*(?:(?!{{|}}).)+\s*}}/g,o=>{let i=M(`${o.match(/(?!{|\s).+?(?!\\[:;]).(?=\s*(?:[:;]|}}$))/)}`),n=t==null?void 0:t[i],[,u=""]=o.match(/.+?(?!\\;).;\s*default\s*:\s*([^\s:;].+?(?:\\[:;]|[^;}])*)(?=\s*(?:;|}}$))/i)||[];u=u||(t==null?void 0:t.default)||"";let[,s=""]=o.match(/{{\s*(?:[^;]|(?:\\;))+\s*(?:(?!\\:).[:])\s*(?!\s)((?:\\;|[^;])+?)(?=\s*(?:[;]|}}$))/i)||[];if(n===void 0&&s!=="ne")return u;let h=!!s,{customModifiers:_}=a||{},w=O(O({},oe),_||{});s=Object.keys(w).includes(s)?s:"eq";let V=w[s],L=(o.match(/[^\s:;{](?:[^;]|\\[;])+[^:;}]/gi)||[]).reduce((m,k,R)=>{if(R>0){let v=M(`${k.match(/(?:(?:\\:)|[^:])+/)}`.trim()),$=`${k.match(/(?:(?:\\:)|[^:])+$/)}`.trimStart();if(v&&v!=="default"&&$)return[...m,{key:v,value:$}]}return m},[]);return!h&&!L.length?n:V({value:n,options:L,props:r,defaultValue:u,locale:l,parserOptions:a})}),ue=({value:e,props:r,payload:t,parserOptions:a,locale:l})=>{if(Ae(e)){let o=De({value:e,payload:t,props:r,parserOptions:a,locale:l});return ue({value:o,payload:t,props:r,parserOptions:a,locale:l})}else return M(e)},Ie=e=>({parse:(r,[t,a],l,o)=>(t!=null&&t.default&&r===void 0&&(r=t.default),r===void 0&&(r=o),ue({value:r,payload:t,props:a,parserOptions:e,locale:l}))}),xe=Ie,Ne=Object.defineProperty,Se=Object.defineProperties,Fe=Object.getOwnPropertyDescriptors,N=Object.getOwnPropertySymbols,ce=Object.prototype.hasOwnProperty,de=Object.prototype.propertyIsEnumerable,J=(e,r,t)=>r in e?Ne(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t,Ce=(e,r)=>{for(var t in r||(r={}))ce.call(r,t)&&J(e,t,r[t]);if(N)for(var t of N(r))de.call(r,t)&&J(e,t,r[t]);return e},Ke=(e,r)=>Se(e,Fe(r)),Me=(e,r)=>{var t={};for(var a in e)ce.call(e,a)&&r.indexOf(a)<0&&(t[a]=e[a]);if(e!=null&&N)for(var a of N(e))r.indexOf(a)<0&&de.call(e,a)&&(t[a]=e[a]);return t},Q=e=>{var r=e,{parserOptions:t={}}=r,a=Me(r,["parserOptions"]);return Ke(Ce({},a),{parser:xe(t)})},He=class extends ge{constructor(r){super(r&&Q(r)),this.loadConfig=t=>super.configLoader(Q(t))}},ze=He;const qe="ENG",Be="HIN",Ge="BEN",C={en:qe,hi:Be,bn:Ge},We={translations:{en:{lang:C},hi:{lang:C},bn:{lang:C}},loaders:[{locale:"en",key:"menu",loader:async()=>(await f(async()=>{const{default:e}=await import(`${g}/en/menu.json`);return{default:e}},[],import.meta.url)).default},{locale:"en",key:"error",loader:async()=>(await f(async()=>{const{default:e}=await import(`${g}/en/error.json`);return{default:e}},[],import.meta.url)).default},{locale:"en",key:"home",routes:["","/"],loader:async()=>(await f(async()=>{const{default:e}=await import(`${g}/en/home.json`);return{default:e}},[],import.meta.url)).default},{locale:"en",key:"chapter2",routes:["/chapter2"],loader:async()=>(await f(async()=>{const{default:e}=await import(`${g}/en/chapter2.json`);return{default:e}},[],import.meta.url)).default},{locale:"en",key:"chapter3",routes:["/chapter3"],loader:async()=>(await f(async()=>{const{default:e}=await import(`${g}/en/chapter3.json`);return{default:e}},[],import.meta.url)).default},{locale:"en",key:"method",routes:["/method"],loader:async()=>(await f(async()=>{const{default:e}=await import(`${g}/en/method.json`);return{default:e}},[],import.meta.url)).default},{locale:"hi",key:"menu",loader:async()=>(await f(async()=>{const{default:e}=await import(`${g}/hi/menu.json`);return{default:e}},[],import.meta.url)).default},{locale:"hi",key:"error",loader:async()=>(await f(async()=>{const{default:e}=await import(`${g}/hi/error.json`);return{default:e}},[],import.meta.url)).default},{locale:"hi",key:"home",routes:["","/"],loader:async()=>(await f(async()=>{const{default:e}=await import(`${g}/hi/home.json`);return{default:e}},[],import.meta.url)).default},{locale:"hi",key:"method",routes:["/method"],loader:async()=>(await f(async()=>{const{default:e}=await import(`${g}/hi/method.json`);return{default:e}},[],import.meta.url)).default},{locale:"hi",key:"chapter2",routes:["/chapter2"],loader:async()=>(await f(async()=>{const{default:e}=await import(`${g}/hi/chapter2.json`);return{default:e}},[],import.meta.url)).default},{locale:"hi",key:"chapter3",routes:["/chapter3"],loader:async()=>(await f(async()=>{const{default:e}=await import(`${g}/hi/chapter3.json`);return{default:e}},[],import.meta.url)).default},{locale:"hi",key:"method",routes:["/method"],loader:async()=>(await f(async()=>{const{default:e}=await import("./method.WB6kqv2x.js");return{default:e}},[],import.meta.url)).default},{locale:"bn",key:"menu",loader:async()=>(await f(async()=>{const{default:e}=await import("./menu.wecPc_ST.js");return{default:e}},[],import.meta.url)).default},{locale:"bn",key:"error",loader:async()=>(await f(async()=>{const{default:e}=await import("./error.XXCH5r0s.js");return{default:e}},[],import.meta.url)).default},{locale:"bn",key:"home",routes:["","/"],loader:async()=>(await f(async()=>{const{default:e}=await import("./home.5rUBECx2.js");return{default:e}},[],import.meta.url)).default},{locale:"bn",key:"method",routes:["/method"],loader:async()=>(await f(async()=>{const{default:e}=await import("./method.Ca2q6A8p.js");return{default:e}},[],import.meta.url)).default},{locale:"bn",key:"chapter2",routes:["/chapter2"],loader:async()=>(await f(async()=>{const{default:e}=await import("./chapter2.BJhsbhuF.js");return{default:e}},[],import.meta.url)).default},{locale:"bn",key:"chapter3",routes:["/chapter3"],loader:async()=>(await f(async()=>{const{default:e}=await import("./chapter3.DRGK4ULT.js");return{default:e}},[],import.meta.url)).default},{locale:"bn",key:"method",routes:["/method"],loader:async()=>(await f(async()=>{const{default:e}=await import("./method.Ca2q6A8p.js");return{default:e}},[],import.meta.url)).default}]},{t:Ze,locale:et,locales:tt,loading:X,addTranslations:at,loadTranslations:rt,translations:Y,setRoute:lt,setLocale:ot}=new ze(We);X.subscribe(async e=>{e&&(console.log("Loading translations..."),await X.toPromise(),console.log("Updated translations",Y.get()),console.log("----",Y))});export{at as a,ot as b,tt as c,et as l,lt as s,Ze as t};
